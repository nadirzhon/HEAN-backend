#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º –∫–æ–¥–æ–º

set -e

echo "üõë –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç–∞—Ä—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä UI..."
docker-compose stop ui 2>/dev/null || true
docker-compose rm -f ui 2>/dev/null || true

echo "üóëÔ∏è  –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π –æ–±—Ä–∞–∑..."
docker rmi hean-ui 2>/dev/null || true

echo "üî® –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ–º –Ω–æ–≤—ã–π frontend (apps/ui) –±–µ–∑ –∫—ç—à–∞..."
docker-compose build --no-cache ui

echo "üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä..."
docker-compose up -d ui

echo "‚è≥ –ñ–¥–µ–º –∑–∞–ø—É—Å–∫–∞ (10 —Å–µ–∫—É–Ω–¥)..."
sleep 10

echo "üìä –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å..."
docker ps | grep hean-ui

echo "üìù –õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:"
docker logs hean-ui --tail 20

echo ""
echo "‚úÖ –ì–æ—Ç–æ–≤–æ! –ù–æ–≤—ã–π UI –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:3000"
echo "üí° –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —Å—Ç–∞—Ä—ã–π —Å–∞–π—Ç, –æ—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+Shift+R –∏–ª–∏ Cmd+Shift+R)"
