#!/bin/bash
# HEAN SYMBIONT X - Docker Diagnostics Script

echo "═══════════════════════════════════════════════════════════"
echo "🔍 ДИАГНОСТИКА DOCKER - HEAN SYMBIONT X"
echo "═══════════════════════════════════════════════════════════"
echo ""

# 1. Проверка статуса всех контейнеров
echo "1️⃣  Проверка статуса контейнеров..."
echo "───────────────────────────────────────────────────────────"
docker compose ps -a
echo ""

# 2. Проверка статуса symbiont контейнеров
echo "2️⃣  Статус SYMBIONT контейнеров..."
echo "───────────────────────────────────────────────────────────"
docker compose ps -a | grep symbiont
echo ""

# 3. Логи последней сборки
echo "3️⃣  Логи последней сборки symbiont-testnet..."
echo "───────────────────────────────────────────────────────────"
docker compose logs --tail=50 symbiont-testnet
echo ""

# 4. Попытка запуска
echo "4️⃣  Попытка запуска контейнера..."
echo "───────────────────────────────────────────────────────────"
docker compose up symbiont-testnet 2>&1 | head -100
echo ""

# 5. Проверка существования образа
echo "5️⃣  Проверка Docker образа..."
echo "───────────────────────────────────────────────────────────"
docker images | grep hean-symbiont
echo ""

echo "═══════════════════════════════════════════════════════════"
echo "✅ Диагностика завершена"
echo "═══════════════════════════════════════════════════════════"
